# Бизнес требования

- Лайкать и удалять лайк у фраз.
- Комментировать фразы и удалять свои комменты и комменты у своей фразы.
- Блокировать и разблокировать юзера.

# Функциональные требования

## 1.1 Метод like-phrase (auth) POST

**Входящие данные**<br/>
/like-phrase/{phraseId}

**Валидация**<br/>
phraseId > 0

**Логика метода**<br/>
Сервис добавляет в таблиицу like_phrase id фразы и id юзера, от которого поступил запрос.

**Исходящие данные в случае успеха** <br/>статус 200

## 1.2 Метод unlike-phrase (auth) DELETE

**Входящие данные**<br/>
/unlike-phrase/{phraseId}

**Валидация**<br/>
phraseId > 0

**Логика метода**<br/>
Сервис удаляет из таблиицы like_phrase id фразы и id юзера, от которого поступил запрос.

**Исходящие данные в случае успеха** <br/>статус 200

## 2.1 Метод comment-phrase (auth) POST

**Входящие данные**<br/>

```json
{
  "phraseId": 5,
  "text": "Очень верное утверждение."
}
```

**Валидация**<br/>
text >= 1 символов, <= 140, разрешенные символы a-zA-Z0-9а-яА-Я.,:; _?!+=/'\"*(){}[]-

**Логика метода**<br/>
Сервис добавляет id фразы, x`x`id юзера и текст комментария в таблицу comment.

**Исходящие данные в случае успеха** <br/>статус 200

## 2.2 Метод delete-comment-phrase (auth) DELETE

**Входящие данные**<br/>

/delete-comment-phrase/{commentId}

**Валидация**<br/>
commentId > 0

**Логика метода**<br/>
Сервис удаляет из таблиицы comment комментарий юзера при условии, что комментарий принадлежит юзеру или относится к
фразе юзера.

**Исходящие данные в случае успеха** <br/>статус 200

## 3.1 Метод block-user (auth) POST

**Входящие данные**<br/>

/block-user/{blockUserId}

**Валидация**<br/>
blockUserId > 0

**Логика метода**<br/>
Сервис добавляет в таблицу block id юзера, который блокирует, и id юзере, которого блокируют. При этом заблокированный
юзер не может:

- на вас подписаться,
- лайкать ваши фразы
- комментировать ваши фразы
- видеть ваши фразы в разных лентах

В случае, если блокируемый юзер был подписан на юзера, который его заблокировал - подписка удаляется.

**Исходящие данные в случае успеха** <br/>статус 200

## 3.2 Метод blocked-users (auth) GET

**Входящие данные**<br/>

**Логика метода**<br/>
Сервис возвращает id и nickname юзеров, которых заблокировал текущий пользователь.

**Исходящие данные в случае успеха** <br/>статус 200

```json
{
  "data": {
    "blockedUsers": [
      {
        "userId": 5,
        "nickname": "some nickname"
      },
      {
        "userId": 2,
        "nickname": "some nickname - 2"
      }
    ]
  }
}
```

## 3.3 Метод unblock-user (auth) DELETE

**Входящие данные**<br/>

/unblock-user/{blockUserId}

**Валидация**<br/>
blockUserId > 0

**Логика метода**<br/>
Сервис удаляет из таблицы block строку с id текущего юзера и юзера с входящим blockUserId.